<!-- 내채팅목록, 채팅방만들기, 활성화된 채팅목록으로 접근할 수 있는 가장 초기 html파일 -->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>chatMain</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script src="/socket.io/socket.io.js"></script>
    <style>
        #topBar{
            width: 100%;
            height:50px;
            background: #0B2239;
            border: 1px solid gray;
            border-bottom-style : none;
            display:flex;
            align-items:center;
            color:ivory;
        }
        #topBar a:hover{
            color: ivory;                           
        }
        #middleBar{
            width: 100%;
            height:50px;
            background: whitesmoke;
            border: 1px solid gray;
            display:flex;
            align-items:center;
        }
        #bottomBar{
            width: 100%;
            height:75px;
            background: white;
            border-bottom: 0.5px solid #D8D8D8;
            display:flex;
            align-items:center;
        }
        a{text-decoration:none; color:#000000;}         

        a:hover{color:black;
        }       
        .left-items{
            display:flex;
            margin-right:auto;
            float: left; 
            line-height: 25px;     
            vertical-align: middle;    
            text-align: left;    
        }
        .center-items{
            display:flex;
            margin-right:auto;
            margin-left:auto;
            float: left; 
            line-height: 25px;     
            vertical-align: middle;    
            text-align: left;    
        }
        .right-items{
            display:flex;
            margin-right:10px;
            margin-left:auto;
            float: right; 
            line-height: 25px;     
            vertical-align: middle;    
            text-align: right;   
        }
        .item{
            margin-left:10px;
            font-weight:bold;
        }
        .menuLink {                          
            text-decoration:none;                  
            color: ivory;                           
            display: block;                         
            font-size: 12px;                          
            font-weight: bold;                         
        }
        
        .msgLine {
        margin: 15px;
        }
        .msgBox {
        border: 1px solid black;
        background: #FFF1B8;
        padding: 2px 5px;
        border-radius: 10px;
        }
        #container {
            width: 100%;
            height:550px;
            border: 1px solid gray;
            border-top-style : none;
            background: whitesmoke;
        }
        #MyroomList {
            height: 100%;
            overflow-y: scroll;
        }
        ul { margin: 0;  padding: 0; }
        li {
        width : 100%;
        height: 60px;
        display: block;
        border-bottom: 0.5px solid #bcbcbc;
      }
    </style>
    <script>
            // 소켓io서버 객체화
        const socket = io();

        $(function(){
        var chat = $('#chat');
        var time = $('#time');
    
        //content값에 클릭같이 변화가 생겼을때
       
        
        socket.emit('latestChat', value);
    });

        socket.on('latestChat', function(data) {
             

    });

            var MyroomList = document.getElementById('MyroomList'); // 내 채팅방 목록
    </script>
</head>
<body>    
        <nav id="topBar"> 
            <div class="left-items">
                <div class="item"><a class="menuLink" style="font-size:20px;">채팅</a></div>
                </div>

                <div class="right-items">
                    
                    <div class="item"><a href="/roomAdd" class="menuLink" style="margin-top:10px;"><img src="http://localhost:8080/images/group.png"></a></div>
                </div>
        </nav>
        
        <nav id="middleBar">
            <a href='/roomList'>
            <div class="left-items">
                <div class="item"><span class="menuLink" style="font-size:15px; color: black;">활성화된 채팅방 목록 보기</span></div>
                </div>

                <div class="right-items">
                    <span class="menuLink" style="font-size:35px; color: black;"><%=count %><img src="http://localhost:8080/images/roomList.png"></span>
                </a>
                </div>
        </nav>
        
    <div id="container">
        <div id="MyroomList">
            <!-- List 형태는 의미에 맞게 <ul><li>태그 이용 -->
		<% if(roomlist != null && roomlist.length > 0){ %>
            <ul>
                <% for ( var i = 0; i < roomlist.length; i++){ %>
                    <!-- href를 이용해서 페이지 이동시  data-ajax="false" 를 추가해줘야 함. 그렇지 않으면 ajax형태로 가져온 데이터(화면)을 추가함.-->
                    <li><a href="/room/chat?id=<%=roomlist[i].id%>"  data-ajax="false">
                       <div style ="font-size:x-large; margin-left:10px"><%=roomlist[i].title%></div>
                       <!-- 가장 최신 채팅내용과 시간전달받기 -->
                        <small style="margin-left:10px" id="chat"><%=reply[i]%></small>
                            <small style="float:right; margin-right:10px" id="time"><%=relativeTime[i]%></small>
                        </a>
                    </li>
                <% } %>
            </ul>
        <% }else{ %>
            <div style ="font-size:large; margin-left:10px">채팅목록이 없습니다.</div>
       <% } %>
        </div>
    </div>
</body>
</html>
